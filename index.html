<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Products â€” My Shop</title>

  <!-- Bootstrap CSS (via CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    /* custom optional styling */
    .card-img-top {
      object-fit: cover;
      height: 200px;
    }
    .card-title {
      font-size: 1.1rem;
      min-height: 3em;
    }
  </style>
</head>
<body>

  <!-- Navbar (basic) -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <a href="#" class="navbar-brand fs-4 fw-bold">
            <img src="https://sp.yimg.com/ib/th/id/OIP.FoHThg2cr6Nu8lra-T17TgHaHa?pid=Api&w=148&h=148&c=7&rs=1" height="50" alt="CoolBrand">MY SHOP
        </a>
        <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav ms-auto fs-4 fw-bold">
                <a href="#" class="nav-item nav-link active">Home</a>
                <a href="#" class="nav-item nav-link">Profile</a>
                <a href="#" class="nav-item nav-link">Messages</a>
                <a href="#" class="nav-item nav-link " tabindex="-1">Reports</a>
            </div>
            <div class="navbar-nav ms-auto">
                <a href="#" class="nav-item nav-link fs-4 fw-bold">Login</a>
            </div>
        </div>
    </div>
</nav>

  <div class="container my-4">
    <div id="products-row" class="row gy-4">
      <!-- product cards will be inserted here -->
    </div>
  </div>

  <!-- Bootstrap JS (for responsive nav, etc.) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Our JS to fetch & render products -->
  <script>
    async function fetchProducts() {
      try {
        const res = await fetch('https://dummyjson.com/products');
        const data = await res.json();
        return data.products;  // array of products
      } catch (err) {
        console.error('Error fetching products:', err);
        return [];
      }
    }

    function createProductCard(product) {
      const col = document.createElement('div');
      col.className = 'col-sm-6 col-md-4 col-lg-3';

      const card = document.createElement('div');
      card.className = 'card h-100';

      const img = document.createElement('img');
      img.src = product.thumbnail || product.images?.[0] || '';
      img.alt = product.title;
      img.className = 'card-img-top';

      const cardBody = document.createElement('div');
      cardBody.className = 'card-body d-flex flex-column';

      const title = document.createElement('h5');
      title.className = 'card-title';
      title.textContent = product.title;

      const price = document.createElement('p');
      price.className = 'card-text text-success fw-bold';
      price.textContent = '$' + product.price;

      const btn = document.createElement('a');
      btn.className = 'btn btn-primary mt-auto';
      btn.href = `product.html?id=${product.id}`;
      btn.textContent = 'View';

      cardBody.append(title, price, btn);
      card.append(img, cardBody);
      col.append(card);

      return col;
    }

    async function init() {
      const products = await fetchProducts();
      const row = document.getElementById('products-row');

      products.forEach(prod => {
        const cardCol = createProductCard(prod);
        row.append(cardCol);
      });
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>

</body>
</html>
